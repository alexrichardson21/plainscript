<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <meta name="description" content="PlainScript: A small scripting language, very plain and uninteresting">

    <link rel="stylesheet" type="text/css" media="screen" href="/plainscript/assets/css/style.css?v=1983a9aa65aab360338547cffb816472a6ee8642">

    <title>plainscript</title>
  </head>

  <body>

    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/rtoal/plainscript">View on GitHub</a>

          <h1 id="project_title"><img src="plainscript-logo.png" width=80 height=80 border=0><br>Plainscript</h1>
          <h2 id="project_tagline">A small, plain scripting language</h2>


        </header>
    </div>

    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

<p>PlainScript is a primitive scripting language whose only purpose is to serve as a starting point for student language design and implementation projects. Hereâ€™s an example program in PlainScript:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">sum_of_digits</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sum_of_digits</span><span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sum_of_digits</span><span class="p">(</span><span class="n">n</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">10</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">sum_of_digits</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="mi">8835299</span><span class="p">))</span></code></pre>
</div>

<p>Yes, it looks a lot like Python, but itâ€™s <em>not</em> a Python subset. There are some differences.</p>

<p>See the file <a href="https://github.com/rtoal/plainscript/blob/master/syntax/plainscript.ohm">plainscript.ohm</a> for the official syntax. The syntax assumes the source code has been preprocessed with indents and dedents inserted according the <a href="https://docs.python.org/3/reference/lexical_analysis.html">Python indentation algorithm</a>.</p>

<h2 id="data-types">Data Types</h2>

<p>As of now, PlainScript has only two data types:</p>
<ul>
  <li><code class="highlighter-rouge">number</code> (IEEE 754 64-bit)</li>
  <li><code class="highlighter-rouge">bool</code> (<code class="highlighter-rouge">true</code> and <code class="highlighter-rouge">false</code>).</li>
  <li><code class="highlighter-rouge">string</code> (sequences of unicode characters).</li>
</ul>

<p>The language is dynamically and weakly typed. Types are compatible with each other as in JavaScript. Sigh.</p>

<h2 id="declarations">Declarations</h2>

<p>There are three types of declarations: variable declarations, function declarations, and parameter declarations.</p>

<p>Variables are declared with <code class="highlighter-rouge">let</code>:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let x, y, z = 0, sqrt(3), "dog"
</code></pre>
</div>
<p>The expressions on the right hand side are evaluated in arbitrary order (or even in parallel) and then assigned to the newly created variables on the left hand side. The variables do not come into scope until <em>after</em> the declaration is complete. So the following script prints <code class="highlighter-rouge">15</code>:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let x = 10
if true:
    let x = x + 5    # Right hand side refers to the outer x
    print(x)
</code></pre>
</div>

<p>Function declarations look like this:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>def f(a, b=a+1, c=5):
    let d = 8
    if b &lt; 0:
        return a * b + c
    f(1, b - 10)
</code></pre>
</div>
<p>Each parameter comes into scope immediately after it is declared, so parameters can use earlier parameters in their default expressions. Parameters and local variables live in the same scope. The function name belongs to the outer scope. Conceptually it is comes into existence after the definition line, so (1) you <em>can</em> call a function recursively, but you <em>cannot</em> call the function in the default expressions of its own parameters.</p>

<p>Parameters without default expressions are <em>required</em> parameters; those with default expressions are <em>optional</em> parameters. You may not place a required parameter after an optional one.</p>

<p>It is illegal to have multiple declarations of the same identifier within a scope. Scopes are:</p>
<ul>
  <li>the entire program</li>
  <li>the parameters plus the body of a function</li>
  <li>bodies of while-statements and if-statement cases.</li>
</ul>

<p>Inner scopes make holes in outer scopes, and inner declarations always shadow outer ones.</p>

<h2 id="expressions">Expressions</h2>

<p>A PlainScript expression is one of:</p>
<ul>
  <li>A boolean literal, either <code class="highlighter-rouge">true</code> and <code class="highlighter-rouge">false</code></li>
  <li>A numeric literal, e.g., 6.22e+28</li>
  <li>A string literal, delimited with double quotes, containing any character except a newline, backslash, or double quote, those these can be escaped as <code class="highlighter-rouge">\n</code>, <code class="highlighter-rouge">\\</code>, or <code class="highlighter-rouge">\"</code>, respectively. Arbitrary characters appear with hexidecimal codepoints between <code class="highlighter-rouge">\u{</code> and <code class="highlighter-rouge">}</code>, for example <code class="highlighter-rouge">\u{1f451}</code> (ðŸ‘‘).</li>
  <li>A variable reference, which is either an identifier or a variable reference with a subscript.</li>
  <li>An expression prefixed with <code class="highlighter-rouge">-</code> or <code class="highlighter-rouge">!</code>.</li>
  <li>An infix expression with operator <code class="highlighter-rouge">+</code>, <code class="highlighter-rouge">-</code>, <code class="highlighter-rouge">*</code>, <code class="highlighter-rouge">/</code>, <code class="highlighter-rouge">%</code>, <code class="highlighter-rouge">&lt;</code>, <code class="highlighter-rouge">&lt;=</code>, <code class="highlighter-rouge">==</code>, <code class="highlighter-rouge">!=</code>, <code class="highlighter-rouge">&gt;=</code>, <code class="highlighter-rouge">&gt;</code>, <code class="highlighter-rouge">and</code>, or <code class="highlighter-rouge">or</code>.</li>
  <li>A function call.</li>
</ul>

<p>It is an error to reference a variable that has not been declared.</p>

<p>A function call has the form:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>f(5*3, true, c: "hi", d: 10*g(1,2))
</code></pre>
</div>
<p>The arguments are evaluated in arbitrary order (or even in parallel) and passed to the callee. An argument prefixed with a parameter name is called a <em>keyword</em> argument; arguments not prefixed are called <em>positional</em> arguments. Positional arguments must come before keyword arguments.</p>

<p>All required parameters of a function must be covered in the call. If keyword arguments are present, the identifier must match one of the parameters. It is an error to match a parameter multiple times.</p>

<h2 id="statements">Statements</h2>

<p>The statements are:</p>

<ul>
  <li>A variable declaration (defined above).</li>
  <li>A function declaration (defined above).</li>
  <li>An assignment statement, e.g. <code class="highlighter-rouge">x, y = y, x+y</code>, in which the right-hand-sides are first evaluated in arbitrary order (or even in parallel) and then assigned to the corresponding variables on the left-hand-sides, which must be previously declared.</li>
  <li>A function call (defined above).</li>
  <li>A <code class="highlighter-rouge">break</code> statement, which must appear in a loop.</li>
  <li>A <code class="highlighter-rouge">return</code> statement, which may or may not have an expression to return. It is an error to have a return statement outside of a function body.</li>
  <li>An <code class="highlighter-rouge">if</code> statement</li>
  <li>A <code class="highlighter-rouge">while</code> statement</li>
</ul>

<h2 id="predefined-environment">Predefined Environment</h2>

<p>The top-level scope of a PlainScript program extends a global environment defining:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>def print(_):
    ...

def sqrt(_):
    ...
</code></pre>
</div>

<h2 id="future-plans">Future Plans</h2>

<p>This language as it stands isnâ€™t good for much. You should extend it to make something cool. Here are things you can add:</p>

<ul>
  <li>Constants</li>
  <li>String interpolation</li>
  <li>A list type</li>
  <li>A set type</li>
  <li>A tuple type</li>
  <li>A dictionary type</li>
  <li>Operators for strings, lists, sets, tuples, and dictionaries</li>
  <li>Static typing</li>
  <li>Generics</li>
  <li>Type inference</li>
  <li>Function overloading</li>
  <li>Algebraic (Sum) types</li>
  <li>Pattern Matching</li>
  <li>Classes</li>
  <li>Processes</li>
  <li>(First-class) function types</li>
</ul>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>


  </body>
</html>
